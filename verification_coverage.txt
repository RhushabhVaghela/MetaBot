============================= test session starts ==============================
platform linux -- Python 3.12.6, pytest-9.0.2, pluggy-1.6.0
rootdir: /mnt/d/MegaBot
configfile: pyproject.toml
plugins: asyncio-1.3.0, cov-7.0.0, anyio-4.12.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1355 items

tests/test_admin_handler.py ............................................ [  3%]
...                                                                      [  3%]
tests/test_agents.py ..........                                          [  4%]
tests/test_backup_manager.py ...................                         [  5%]
tests/test_chat_memory.py ...................                            [  7%]
tests/test_config.py ...........                                         [  7%]
tests/test_coverage_completion.py .....                                  [  8%]
tests/test_coverage_completion_final.py ...................              [  9%]
tests/test_coverage_gaps.py .............                                [ 10%]
tests/test_dependencies_full.py ..............                           [ 11%]
tests/test_discord_adapter.py .......................................... [ 14%]
.......................................................                  [ 18%]
tests/test_discovery.py ..                                               [ 18%]
tests/test_drivers.py ....................                               [ 20%]
tests/test_extra_llm_providers.py ....                                   [ 20%]
tests/test_fastapi_endpoints.py ....                                     [ 20%]
tests/test_instrumentation_discovery.py .......                          [ 21%]
tests/test_integration_adapters.py .....                                 [ 21%]
tests/test_interfaces.py ..                                              [ 21%]
tests/test_knowledge_memory.py .....................                     [ 23%]
tests/test_llm_providers.py ........................                     [ 25%]
tests/test_llm_providers_coverage.py .........                           [ 25%]
tests/test_llm_providers_new.py ......                                   [ 26%]
tests/test_loki.py .....................                                 [ 27%]
tests/test_main.py .                                                     [ 28%]
tests/test_mcp_adapter.py ..........                                     [ 28%]
tests/test_mcp_server.py ...........................                     [ 30%]
tests/test_megabot_messaging.py ........................................ [ 33%]
........................................................................ [ 39%]
.........................................................                [ 43%]
tests/test_memory_logic.py .                                             [ 43%]
tests/test_memu_adapter.py .................                             [ 44%]
tests/test_messaging_imessage.py .....                                   [ 44%]
tests/test_messaging_server.py ..........................                [ 46%]
tests/test_messaging_server_coverage.py .................                [ 48%]
tests/test_messaging_sms.py .......                                      [ 48%]
tests/test_messaging_telegram.py ....................................... [ 51%]
....                                                                     [ 51%]
tests/test_minimal.py .                                                  [ 51%]
tests/test_nanobot_adapter.py ..............                             [ 52%]
tests/test_network_monitor.py .............                              [ 53%]
tests/test_network_server.py ........                                    [ 54%]
tests/test_network_tunnel.py ..............                              [ 55%]
tests/test_openclaw_adapter.py .................                         [ 56%]
tests/test_orchestrator.py ............................................. [ 60%]
.............                                                            [ 61%]
tests/test_orchestrator_components_coverage.py ....                      [ 61%]
tests/test_orchestrator_components_extra.py ....                         [ 61%]
tests/test_orchestrator_coverage.py ......                               [ 62%]
tests/test_orchestrator_coverage_final.py ...                            [ 62%]
tests/test_orchestrator_extended.py ..........                           [ 63%]
tests/test_pageindex.py ......................                           [ 64%]
tests/test_permissions.py ...........                                    [ 65%]
tests/test_projects_secrets.py ............                              [ 66%]
tests/test_push_notification_adapter.py ................................ [ 68%]
........................................                                 [ 71%]
tests/test_signal_adapter.py ........................................... [ 74%]
.....................                                                    [ 76%]
tests/test_slack_adapter.py ............................................ [ 79%]
................                                                         [ 80%]
tests/test_telegram_adapter.py ......................................... [ 83%]
.......                                                                  [ 84%]
tests/test_tirith_guard.py ......................                        [ 85%]
tests/test_unified_gateway.py .......................................... [ 89%]
........................                                                 [ 90%]
tests/test_unified_gateway_thorough.py .............................     [ 92%]
tests/test_user_identity.py ..................                           [ 94%]
tests/test_v1_advanced.py ...                                            [ 94%]
tests/test_voice_adapter.py ..............                               [ 95%]
tests/test_whatsapp_boost.py ....                                        [ 95%]
tests/test_whatsapp_coverage.py .................                        [ 97%]
tests/test_whatsapp_coverage_2.py ........                               [ 97%]
tests/test_whatsapp_coverage_3.py .                                      [ 97%]
tests/test_whatsapp_coverage_4.py .....                                  [ 98%]
tests/test_whatsapp_coverage_final.py ..................                 [ 99%]
tests/test_whatsapp_final.py .......                                     [100%]

=============================== warnings summary ===============================
tests/test_orchestrator_components_extra.py::test_background_tasks_extra_coverage
  /usr/lib/python3.12/unittest/mock.py:2195: RuntimeWarning: coroutine 'BackgroundTasks.sync_loop' was never awaited
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_orchestrator_components_extra.py::test_background_tasks_extra_coverage
  /usr/lib/python3.12/unittest/mock.py:2195: RuntimeWarning: coroutine 'BackgroundTasks.proactive_loop' was never awaited
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_orchestrator_components_extra.py::test_background_tasks_extra_coverage
  /usr/lib/python3.12/unittest/mock.py:2195: RuntimeWarning: coroutine 'BackgroundTasks.pruning_loop' was never awaited
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_orchestrator_components_extra.py::test_background_tasks_extra_coverage
  /usr/lib/python3.12/unittest/mock.py:2195: RuntimeWarning: coroutine 'BackgroundTasks.backup_loop' was never awaited
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/test_unified_gateway_thorough.py::test_gateway_send_message_full
  /usr/lib/python3.12/unittest/mock.py:2195: RuntimeWarning: coroutine 'test_gateway_stop_with_health_task.<locals>.raise_cancelled' was never awaited
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.12.6-final-0 ________________

Name                                    Stmts   Miss  Cover   Missing
---------------------------------------------------------------------
adapters/__init__.py                        3      0   100%
adapters/channels/__init__.py               0      0   100%
adapters/discord_adapter.py               347      0   100%
adapters/mcp_adapter.py                    58      0   100%
adapters/memu_adapter.py                   96      0   100%
adapters/messaging/__init__.py             15      0   100%
adapters/messaging/__main__.py              2      0   100%
adapters/messaging/imessage.py             29      0   100%
adapters/messaging/server.py              265      0   100%
adapters/messaging/sms.py                  35      0   100%
adapters/messaging/telegram.py            103      0   100%
adapters/messaging/whatsapp.py            244      0   100%
adapters/nanobot_adapter.py                74      0   100%
adapters/openclaw_adapter.py               73      4    95%   20-23
adapters/push_notification_adapter.py     494      0   100%
adapters/security/__init__.py               2      0   100%
adapters/security/tirith_guard.py          31      0   100%
adapters/signal_adapter.py                486      0   100%
adapters/slack_adapter.py                 246      0   100%
adapters/telegram_adapter.py              653      0   100%
adapters/unified_gateway.py                 5      0   100%
adapters/voice_adapter.py                  71      0   100%
core/__init__.py                            5      0   100%
core/admin_handler.py                     200      0   100%
core/agents.py                             47      0   100%
core/config.py                            141      0   100%
core/dependencies.py                       87      0   100%
core/discovery.py                          24      0   100%
core/drivers.py                            90      0   100%
core/instrumentation.py                    38      0   100%
core/interfaces.py                         17      0   100%
core/llm_providers.py                     267      0   100%
core/loki.py                              131      0   100%
core/memory/__init__.py                     6      0   100%
core/memory/backup_manager.py             107      0   100%
core/memory/chat_memory.py                 94      0   100%
core/memory/knowledge_memory.py           127      0   100%
core/memory/mcp_server.py                  79      0   100%
core/memory/user_identity.py               68      0   100%
core/network/__init__.py                    0      0   100%
core/network/gateway.py                   321      0   100%
core/network/monitor.py                    22      0   100%
core/network/server.py                     22      0   100%
core/network/tunnel.py                     38      0   100%
core/orchestrator.py                      300      0   100%
core/orchestrator_components.py           167      0   100%
core/permissions.py                        52      0   100%
core/projects.py                           38      0   100%
core/rag/__init__.py                        2      0   100%
core/rag/pageindex.py                     112      0   100%
core/secrets.py                            36      0   100%
---------------------------------------------------------------------
TOTAL                                    5970      4    99%
================= 1355 passed, 5 warnings in 80.16s (0:01:20) ==================
